#!name = All In One Combo
#!desc = SoundCloud+ Spotify Lyrics + Bilibili1080P + Appraven + YouTube Remove Ads + Locket Premium
#!author = Gấu Lỏz CUTO

################################
# RULE (YouTube)
################################
[Rule]
AND,((DOMAIN-SUFFIX,googlevideo.com),(PROTOCOL,UDP)),REJECT
AND,((DOMAIN,youtubei.googleapis.com),(PROTOCOL,UDP)),REJECT

################################
# URL REWRITE (YouTube)
################################
[URL Rewrite]
(^https?:\/\/[\w\-]+\.googlevideo\.com\/(?!(dclk_video_ads).+?)&ctier=L(&.+?)?),ctier,(.+) $1$2$3 302
https?:\/\/[\w\-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad _ reject-200
^https?:\/\/(www|s)\.youtube\.com\/api\/stats\/ads _ reject-200
^https?:\/\/(www|s)\.youtube\.com\/(pagead|ptracking) _ reject-200
^https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?.+adcontext _ reject-200

################################
# SCRIPT (GỘP TẤT CẢ)
################################
[Script]

# 1. SoundCloud Go+
SoundCloudGo = type=http-response,pattern=https:\/\/api-mobile\.soundcloud\.com\/configuration\/ios,requires-body=1,script-path=https://raw.githubusercontent.com/Maro162926/MarScript/main/soundcloud.js

# 2. Spotify Lyrics (GIỮ NGUYÊN – cần appid & key)
SpotifyLyrics = type=http-response,pattern=^https:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/,requires-body=1,binary-body-mode=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-lyric.js,argument=appid=此处填入APPID&securityKey=此处填入密钥

# 3. Bilibili 1080P
Bilibili1080P = type=http-response,pattern=^https:\/\/app\.bilibili\.com\/x\/v2\/account\/myinfo.*,requires-body=1,script-path=https://raw.githubusercontent.com/deezertidal/private/master/js-backup/Script/bilibili_json.js

# 4. Appraven
Appraven = type=http-response,pattern=^https:\/\/appraven\.net\/AppRaven\/(app|social|buy),requires-body=1,script-path=https://raw.githubusercontent.com/deezertidal/private/master/js-backup/Crack/appraven.js

# 5. YouTube Remove Ads
youtube_response = type=http-response,pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting|get_watch),requires-body=1,binary-body-mode=1,script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/youtube.response.js

# 6. Locket Premium
Locket_res = type=http-response,pattern=^https:\/\/api\.revenuecat\.com\/.+\/(receipts$|subscribers\/[^\/]+$),requires-body=true,script-path=https://raw.githubusercontent.com/vuong2023/shad/main/js/Locket_Ohoang7.js
Locket_req = type=http-request,pattern=^https:\/\/api\.revenuecat\.com\/.+\/(receipts|subscribers),script-path=https://raw.githubusercontent.com/vuong2023/shad/main/js/deleteHeader.js

################################
# MITM (GỘP TOÀN BỘ)
################################
[MITM]
hostname = %APPEND% api-mobile.soundcloud.com, spclient.wg.spotify.com, app.bilibili.com, appraven.net, *.googlevideo.com, googlevideo.com, www.youtube.com, s.youtube.com, youtubei.googleapis.com, api.revenuecat.com
